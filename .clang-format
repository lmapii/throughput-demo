---
Language: Cpp
# BasedOnStyle: LLVM
# https://clang.llvm.org/docs/ClangFormatStyleOptions.html
# compare against `clang-format --style=webkit -dump-config > .clang-format`
AccessModifierOffset: -4
AlignAfterOpenBracket: AlwaysBreak
AlignConsecutiveAssignments: Consecutive
AlignConsecutiveBitFields: Consecutive
AlignConsecutiveDeclarations: false
AlignConsecutiveMacros: Consecutive
AlignEscapedNewlines: Left
# https://github.com/llvm/llvm-project/issues/98559
# https://github.com/llvm/llvm-project/pull/100860
# the ternary operator alignment is not changed
AlignOperands: DontAlign
AlignTrailingComments: true
AllowAllArgumentsOnNextLine: true
AllowAllParametersOfDeclarationOnNextLine: true
AllowShortBlocksOnASingleLine: false
AllowShortCaseLabelsOnASingleLine: false
AllowShortEnumsOnASingleLine: false
AllowShortFunctionsOnASingleLine: None
AllowShortIfStatementsOnASingleLine: false
AllowShortLoopsOnASingleLine: false
AlwaysBreakAfterDefinitionReturnType: None
AlwaysBreakAfterReturnType: None
AlwaysBreakBeforeMultilineStrings: false
AlwaysBreakTemplateDeclarations: MultiLine
BinPackArguments: false
BitFieldColonSpacing: Both
BinPackParameters: false
BraceWrapping:
  AfterCaseLabel:  true
  AfterClass:      true
  AfterControlStatement: true
  AfterEnum:       true
  AfterFunction:   true
  AfterNamespace:  false
  AfterObjCDeclaration: false
  AfterStruct:     true
  AfterUnion:      true
  BeforeCatch:     true
  BeforeElse:      true
  IndentBraces:    false
  SplitEmptyFunction: true
  SplitEmptyRecord: true
  SplitEmptyNamespace: true
  AfterExternBlock: false
BreakBeforeBinaryOperators: None
BreakBeforeBraces: Custom
BreakBeforeInheritanceComma: false
BreakInheritanceList: BeforeComma
BreakBeforeTernaryOperators: true
BreakConstructorInitializersBeforeComma: true
BreakConstructorInitializers: BeforeComma
BreakAfterJavaFieldAnnotations: false
BreakStringLiterals: true
ColumnLimit:     80
CommentPragmas:  '^ IWYU pragma:'
CompactNamespaces: false
ConstructorInitializerAllOnOneLineOrOnePerLine: true
ConstructorInitializerIndentWidth: 4
ContinuationIndentWidth: 4
Cpp11BracedListStyle: true
DerivePointerAlignment: false
DisableFormat:   false
ExperimentalAutoDetectBinPacking: false
FixNamespaceComments: false
IncludeBlocks:   Preserve
IncludeIsMainRegex: '(Test)?$'
IndentCaseLabels: true
IndentExternBlock: false
IndentWidth:     4
IndentWrappedFunctionNames: false
JavaScriptQuotes: Leave
JavaScriptWrapImports: true
KeepEmptyLinesAtTheStartOfBlocks: false
MacroBlockBegin: ''
MacroBlockEnd:   ''
MaxEmptyLinesToKeep: 1
NamespaceIndentation: All
ObjCBinPackProtocolList: Auto
ObjCBlockIndentWidth: 2
ObjCSpaceAfterProperty: false
ObjCSpaceBeforeProtocolList: true
PenaltyBreakAssignment: 350
PenaltyBreakBeforeFirstCallParameter: 20
PenaltyBreakComment: 300 # 100
PenaltyBreakFirstLessLess: 120
PenaltyBreakString: 1000
PenaltyBreakTemplateDeclaration: 10
PenaltyExcessCharacter: 1000000
PenaltyReturnTypeOnItsOwnLine: 2000000
# TODO: clang-format 20
# PenaltyBreakBeforeMemberAccess: 2000
PenaltyIndentedWhitespace: 1000
PointerAlignment: Right
ReferenceAlignment: Right
ReflowComments: true
SortIncludes: true
SortUsingDeclarations: true
SpaceAfterCStyleCast: true
SpaceAfterTemplateKeyword: true
SpaceBeforeAssignmentOperators: true
SpaceBeforeCpp11BracedList: true
SpaceBeforeCtorInitializerColon: true
SpaceBeforeInheritanceColon: true
SpaceBeforeParens: ControlStatements
SpaceBeforeRangeBasedForLoopColon: true
SpaceInEmptyParentheses: false
SpacesBeforeTrailingComments: 1
SpacesInAngles:  false
SpacesInContainerLiterals: false
SpacesInCStyleCastParentheses: false
SpacesInParentheses: false
SpacesInSquareBrackets: false
SpaceBeforeSquareBrackets: false
SpaceBeforeCaseColon: false
SpaceInEmptyBlock: false
SpacesInConditionalStatement: false
Standard:        Cpp11
StatementMacros:
  - Q_UNUSED
  - QT_REQUIRE_VERSION
# using a big tab-width so use is shown immediately
TabWidth:         8
UseTab:           Never
DeriveLineEnding: false
UseCRLF:          false

AttributeMacros:
  - __aligned
  - __deprecated
  - __packed
  - __printf_like
  - __syscall
  - __syscall_always_inline
  - __subsystem
# ForEachMacros:
#   - 'ARRAY_FOR_EACH'
#   - 'ARRAY_FOR_EACH_PTR'
#   - 'FOR_EACH'
#   - 'FOR_EACH_FIXED_ARG'
#   - 'FOR_EACH_IDX'
#   - 'FOR_EACH_IDX_FIXED_ARG'
#   - 'FOR_EACH_NONEMPTY_TERM'
#   - 'FOR_EACH_FIXED_ARG_NONEMPTY_TERM'
#   - 'RB_FOR_EACH'
#   - 'RB_FOR_EACH_CONTAINER'
#   - 'SYS_DLIST_FOR_EACH_CONTAINER'
#   - 'SYS_DLIST_FOR_EACH_CONTAINER_SAFE'
#   - 'SYS_DLIST_FOR_EACH_NODE'
#   - 'SYS_DLIST_FOR_EACH_NODE_SAFE'
#   - 'SYS_SFLIST_FOR_EACH_CONTAINER'
#   - 'SYS_SFLIST_FOR_EACH_CONTAINER_SAFE'
#   - 'SYS_SFLIST_FOR_EACH_NODE'
#   - 'SYS_SFLIST_FOR_EACH_NODE_SAFE'
#   - 'SYS_SLIST_FOR_EACH_CONTAINER'
#   - 'SYS_SLIST_FOR_EACH_CONTAINER_SAFE'
#   - 'SYS_SLIST_FOR_EACH_NODE'
#   - 'SYS_SLIST_FOR_EACH_NODE_SAFE'
#   - '_WAIT_Q_FOR_EACH'
#   - 'Z_FOR_EACH'
#   - 'Z_FOR_EACH_ENGINE'
#   - 'Z_FOR_EACH_EXEC'
#   - 'Z_FOR_EACH_FIXED_ARG'
#   - 'Z_FOR_EACH_FIXED_ARG_EXEC'
#   - 'Z_FOR_EACH_IDX'
#   - 'Z_FOR_EACH_IDX_EXEC'
#   - 'Z_FOR_EACH_IDX_FIXED_ARG'
#   - 'Z_FOR_EACH_IDX_FIXED_ARG_EXEC'
#   - 'Z_GENLIST_FOR_EACH_CONTAINER'
#   - 'Z_GENLIST_FOR_EACH_CONTAINER_SAFE'
#   - 'Z_GENLIST_FOR_EACH_NODE'
#   - 'Z_GENLIST_FOR_EACH_NODE_SAFE'
#   - 'STRUCT_SECTION_FOREACH'
#   - 'STRUCT_SECTION_FOREACH_ALTERNATE'
#   - 'TYPE_SECTION_FOREACH'
#   - 'K_SPINLOCK'
#   - 'COAP_RESOURCE_FOREACH'
#   - 'COAP_SERVICE_FOREACH'
#   - 'COAP_SERVICE_FOREACH_RESOURCE'
#   - 'HTTP_RESOURCE_FOREACH'
#   - 'HTTP_SERVER_CONTENT_TYPE_FOREACH'
#   - 'HTTP_SERVICE_FOREACH'
#   - 'HTTP_SERVICE_FOREACH_RESOURCE'
IfMacros:
  - 'CHECKIF'
WhitespaceSensitiveMacros:
  - STRINGIFY
  - Z_STRINGIFY
IncludeCategories:
  - Regex: '^".*\.h"$'
    Priority: 0
  - Regex: '^<(assert|complex|ctype|errno|fenv|float|inttypes|limits|locale|math|setjmp|signal|stdarg|stdbool|stddef|stdint|stdio|stdlib|string|tgmath|time|wchar|wctype)\.h>$'
    Priority: 1
  - Regex: '^\<zephyr/.*\.h\>$'
    Priority: 2
  - Regex: '.*'
    Priority: 3
...
